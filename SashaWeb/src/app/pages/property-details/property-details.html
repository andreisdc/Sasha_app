<div class="property-details-container">
    @if(property$ | async; as property)
    {
        <h2 class="property-name">{{property.name}}</h2>

        <div class="location-container"> 
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="location">
              <path d="M0 188.6C0 84.4 86 0 192 0S384 84.4 384 188.6c0 119.3-120.2 262.3-170.4 316.8-11.8 12.8-31.5 12.8-43.3 0-50.2-54.5-170.4-197.5-170.4-316.8zM192 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"/>
            </svg>
            <b>{{ property.location }}</b>
            <p class="rating"><b>{{property.rating}} â˜…</b></p>
          </div>
        <div class="image-gallery">
            @if(property.images && property.images.length > 0)
            {
                <div class="first-image">
                    <img [src]="property.images[currentIndex[property.id] || 0]" alt="Main Image" class="main-image"/>
                    <button class="prev" (click)="prev(property)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" stroke="white" fill="none" stroke-width="2">
                            <path d="M15 18l-6-6 6-6"/>
                        </svg>
                    </button>
                    <button class="next" (click)="next(property)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" stroke="white" fill="none" stroke-width="2">
                            <path d="M9 6l6 6-6 6"/>
                        </svg>
                    </button>
                </div>

                <div class="thumbnails">
                    @for(thumbnail of getThumbnails(property); track trackByIndex($index, thumbnail); let i=$index) 
                    {
                        <div class="thumbnail-container">
                            <img [src]="thumbnail.src" alt="n" class="thumbnail"/>
                            @if(property.images.length > 5 && i === getThumbnails(property).length - 1)
                            {
                                <div class="more-images-overlay">
                                    +{{property.images.length - 5}} more
                                </div>
                            }
                        </div>
                    }
                </div>
            }
        </div>   

        <p class="property-description">{{property.description}}</p>
        
    } 
</div>

