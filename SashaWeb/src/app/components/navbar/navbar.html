<nav class="navbar" *ngIf="!isLoading">
  <!-- Loading State (ascuns când isLoading este false) -->
  
  <!-- Left: Logo -->
  <div class="navbar-left">
    <div class="logo-container">
      <div class="logo-icon">
        <i class="fas fa-plane"></i>
      </div>
      <span class="logo-text">Wanderlust</span>
    </div>
  </div>

  <!-- Center: Navigation -->
  <div class="navbar-center">
    <a routerLink="/home" class="nav-link">
      <i class="fas fa-home"></i>
      <span>Home</span>
    </a>
    <a routerLink="/destinations" class="nav-link">
      <i class="fas fa-map-marked-alt"></i>
      <span>Destinations</span>
    </a>
    <a routerLink="/experiences" class="nav-link">
      <i class="fas fa-star"></i>
      <span>Experiences</span>
    </a>
    
    <!-- ✅ Buton Admin Dashboard -->
    <a *ngIf="user?.isAdmin && isAdminView" 
       (click)="goToAdminDashboard()" 
       class="nav-link admin-nav">
      <i class="fas fa-shield-alt"></i>
      <span>Admin Dashboard</span>
    </a>
  </div>

  <!-- Right: Login / Avatar -->
  <div class="navbar-right">
    <ng-container *ngIf="!isLoggedIn; else loggedBlock">
      <button class="login-btn" (click)="goToLogin()">
        <i class="fas fa-user"></i>
        Sign In
      </button>
      <button class="primary-btn" (click)="goToLogin()">
        List Your Property
      </button>
    </ng-container>

    <ng-template #loggedBlock>
      <div class="user-info">
        
        <button class="icon-btn properties-btn" *ngIf="user?.isSeller && !isAdminView">
          <i class="fas fa-plus"></i>
          <span>List Property</span>
        </button>

        <div class="user-avatar" (click)="toggleDropdown()">
          <div class="avatar" [style.background-color]="avatarColor">
            <ng-container *ngIf="displayProfilePicture && displayProfilePicture !== 'assets/default-avatar.png'; else initial">
              <img [src]="displayProfilePicture" alt="Avatar" class="avatar-img">
            </ng-container>
            <ng-template #initial>
              {{ userInitial }}
            </ng-template>
          </div>
          <div class="status-dot"></div>
        </div>

        <!-- Dropdown Menu -->
        <div class="dropdown" *ngIf="dropdownOpen" @dropdownAnimation>
          <div class="user-profile">
            <div class="dropdown-avatar" [style.background-color]="avatarColor">
              <ng-container *ngIf="displayProfilePicture && displayProfilePicture !== 'assets/default-avatar.png'; else initialDropdown">
                <img [src]="displayProfilePicture" alt="Avatar" class="avatar-img">
              </ng-container>
              <ng-template #initialDropdown>
                {{ userInitial }}
              </ng-template>
            </div>
            <div class="user-details">
              <div class="dropdown-username">
                {{ user?.username || 'User' }}
                <span *ngIf="user?.isAdmin" class="admin-indicator">
                  <i class="fas fa-shield-alt"></i>
                </span>
              </div>
              <div class="user-email">
                {{ user?.email || 'Premium Member' }}
              </div>
              <!-- ✅ Indicator pentru modul curent -->
              <div *ngIf="isAdminView" class="view-mode-indicator admin-mode">
                <i class="fas fa-eye"></i> Admin View Active
              </div>
              <div *ngIf="!isAdminView && user?.isAdmin" class="view-mode-indicator user-mode">
                <i class="fas fa-user"></i> User View Active
              </div>
            </div>
          </div>

          <div class="dropdown-menu">
            <a (click)="goToProfile()" class="menu-item">
              <i class="fas fa-user"></i>
              <span>My Profile</span>
            </a>
            
            <!-- ✅ Switch-ul care doar comută modul -->
            <a *ngIf="user?.isAdmin" (click)="toggleAdminView()" class="menu-item admin-option">
              <i class="fas fa-sync-alt"></i>
              <span>{{ isAdminView ? 'Switch to User View' : 'Switch to Admin View' }}</span>
            </a>
            
            <a *ngIf="!user?.isSeller && !isAdminView" (click)="becomeSeller()" class="menu-item seller-option">
              <i class="fas fa-store"></i>
              <span>Become Seller</span>
            </a>
            
            <ng-container *ngIf="user?.isSeller && !isAdminView">
              <a (click)="goToProperties()" class="menu-item">
                <i class="fas fa-building"></i>
                <span>My Properties</span>
              </a>
              <a (click)="goToHistory()" class="menu-item">
                <i class="fas fa-history"></i>
                <span>Booking History</span>
              </a>
            </ng-container>
            
            <a (click)="logout()" class="menu-item logout-option">
              <i class="fas fa-sign-out-alt"></i>
              <span>Logout</span>
            </a>
          </div>
        </div>
      </div>
    </ng-template>
  </div>
</nav>