<nav class="navbar" *ngIf="!isLoading">
  <!-- Loading State (ascuns când isLoading este false) -->
  
  <!-- Left: Logo -->
  <div class="navbar-left">
    <img ngSrc="assets/images/logo.png" alt="Logo" class="logo" width="120" height="40" />
  </div>

  <!-- Center: Navigation -->
  <div class="navbar-center">
    <a routerLink="/home" class="nav-link"><i class="fas fa-home"></i> <span>Home</span></a>
    <a routerLink="/destinations" class="nav-link"><i class="fas fa-map-marked-alt"></i> <span>Destinations</span></a>
    <a routerLink="/experiences" class="nav-link"><i class="fas fa-star"></i> <span>Experiences</span></a>
    
    <!-- ✅ Buton Admin Dashboard care duce direct la dashboard -->
    <a *ngIf="user?.isAdmin && isAdminView" 
       (click)="goToAdminDashboard()" 
       class="nav-link admin-nav active">
      <i class="fas fa-shield-alt"></i> 
      <span>Admin Dashboard</span>
    </a>
  </div>

  <!-- Right: Login / Avatar -->
  <div class="navbar-right">
    <ng-container *ngIf="!isLoggedIn; else loggedBlock">
      <button class="login-btn" (click)="goToLogin()">Login</button>
    </ng-container>

    <ng-template #loggedBlock>
      <div class="user-info">
        <span class="username" (click)="goToProfile()" [title]="user?.username || 'User'">
          {{ user?.username || 'User' }}
          <!-- ✅ Indicator pentru modul admin -->
          <span *ngIf="isAdminView" class="admin-badge" title="Admin Mode Active">
            <i class="fas fa-shield-alt"></i>
          </span>
        </span>

        <div class="avatar" [style.background-color]="avatarColor" (click)="toggleDropdown()">
          <ng-container *ngIf="displayProfilePicture && displayProfilePicture !== 'assets/default-avatar.png'; else initial">
            <img [src]="displayProfilePicture" alt="Avatar" class="avatar-img">
          </ng-container>
          <ng-template #initial>
            {{ userInitial }}
          </ng-template>
        </div>
        <div class="status-dot"></div>

        <!-- Dropdown Menu -->
        <div class="dropdown" *ngIf="dropdownOpen">
          <div class="user-profile">
            <div class="dropdown-avatar" [style.background-color]="avatarColor">
              <ng-container *ngIf="displayProfilePicture && displayProfilePicture !== 'assets/default-avatar.png'; else initialDropdown">
                <img [src]="displayProfilePicture" alt="Avatar" class="avatar-img">
              </ng-container>
              <ng-template #initialDropdown>
                {{ userInitial }}
              </ng-template>
            </div>
            <div class="user-details">
              <div class="dropdown-username" [title]="user?.username || 'User'">
                {{ user?.username || 'User' }}
                <span *ngIf="user?.isAdmin" class="admin-indicator" title="Administrator">
                  <i class="fas fa-shield-alt"></i>
                </span>
              </div>
              <div class="user-email" [title]="user?.email || ''">
                {{ user?.email || 'Premium Member' }}
              </div>
              <!-- ✅ Indicator pentru modul curent -->
              <div *ngIf="isAdminView" class="view-mode-indicator admin-mode">
                <i class="fas fa-eye"></i> Admin View Active
              </div>
              <div *ngIf="!isAdminView && user?.isAdmin" class="view-mode-indicator user-mode">
                <i class="fas fa-user"></i> User View Active
              </div>
            </div>
          </div>

          <div class="dropdown-menu">
            <a (click)="goToProfile()"><i class="fas fa-user"></i> My Profile</a>
            
            <!-- ✅ Switch-ul care doar comută modul, fără navigare -->
            <a *ngIf="user?.isAdmin" (click)="toggleAdminView()" class="admin-option">
              <i class="fas fa-sync-alt"></i> 
              {{ isAdminView ? 'Switch to User View' : 'Switch to Admin View' }}
            </a>
            
            <a *ngIf="!user?.isSeller && !isAdminView" (click)="becomeSeller()" class="seller-option">
              <i class="fas fa-store"></i> Become Seller
            </a>
            
            <ng-container *ngIf="user?.isSeller && !isAdminView">
              <a (click)="goToProperties()"><i class="fas fa-building"></i> My Properties</a>
              <a (click)="goToHistory()"><i class="fas fa-history"></i> Booking History</a>
            </ng-container>
            
            <a (click)="logout()" class="logout-option">
              <i class="fas fa-sign-out-alt"></i> Logout
            </a>
          </div>
        </div>
      </div>
    </ng-template>
  </div>
</nav>